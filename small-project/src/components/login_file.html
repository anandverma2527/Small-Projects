
<html lang="en">

<head>
    <title>Signup Login</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        .nav-pills .nav-link {
            color: #000;
        }

        .nav-pills .nav-link.active {
            color: #fff;
            background-color: #0dcaf0;
        }
    </style>
</head>

<body>

    <nav class="navbar navbar-expand-sm bg-primary navbar-dark p-4"></nav>
    <div class="container-fluid pt-2">
        <div class="row">
            <div class="col-md-6"></div>
            <div class="col-md-6">
                <ul class="nav nav-pills border border-2 rounded-pill" role="tablist">
                    <li class="nav-item w-50">
                        <a class="nav-link active rounded-pill text-center" data-bs-toggle="pill"
                            href="#login">LOGIN</a>
                    </li>
                    <li class="nav-item w-50">
                        <a class="nav-link rounded-pill text-center" data-bs-toggle="pill" href="#signup">SIGNUP</a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div id="login" class="container tab-pane active p-5">
                        <h2>USER LOGIN</h2>
                        <form role="form" enctype="multipart/form-data" method="post" autocomplete="off"
                            id="login_user">
                            <div class="mb-3 mt-3">
                                <input type="text" class="form-control" name="username" id="username"
                                    placeholder="Enter your email" value="" />
                            </div>
                            <div class="mb-3">
                                <input type="password" class="form-control" name="password" id="password"
                                    placeholder="Enter your password" value="" />
                            </div>
                            <div class="mb-3 text-end">
                                <a href="#">Forgot password?</a>
                            </div>
                            <button type="submit" class="btn btn-info btn-block w-100 rounded-pill text-white"
                                id="login_val">LOG ME IN</button>
                        </form>
                    </div>
                    <div id="signup" class="container tab-pane fade">
                        <form role="form" enctype="multipart/form-data" method="post" autocomplete="off"
                            id="signup_user">
                            <div class="row py-3">
                                <div class="col-md-12">
                                    <label>Individual/Enterprise/Government <span class="text-danger">*</span></label>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="form-check">
                                        <input type="radio" class="form-check-input" id="individual" name="user_type"
                                            value="individual" checked>
                                        <label class="form-check-label" for="individual">Individual</label>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="form-check">
                                        <input type="radio" class="form-check-input" id="enterprise" name="user_type"
                                            value="enterprise">
                                        <label class="form-check-label" for="enterprise">Enterprise</label>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="form-check">
                                        <input type="radio" class="form-check-input" id="government" name="user_type">
                                        <label class="form-check-label" for="government">Government</label>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="first_name" class="form-label">Fist Name <span
                                            class="text-danger">*</span></label>
                                    <input type="text" class="form-control empty_check_class" placeholder="First name"
                                        name="first_name" id="first_name">
                                    <div class="show_error_mandatory" id="name_error"></div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="last_name" class="form-label">Last Name</label>
                                    <input type="text" class="form-control" placeholder="Last Name" name="last_name"
                                        id="last_name">
                                </div>
                                <div class="col-md-12 mb-3">
                                    <label for="user_email" class="form-label">Email <span
                                            class="text-danger">*</span></label>
                                    <input type="email" class="form-control empty_check_class" placeholder="Email"
                                        name="user_email" id="user_email">
                                    <div class="show_error_mandatory" id="email_error"></div>
                                </div>
                                <div class="col-md-12 mb-3">
                                    <label for="address" class="form-label">Address <span
                                            class="text-danger">*</span></label>
                                    <input type="text" class="form-control empty_check_class" placeholder="Address"
                                        name="address" id="address">
                                    <div class="show_error_mandatory" id="address_error"></div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="countries_id" class="form-label">Country <span
                                            class="text-danger">*</span></label>
                                    <select class="form-select empty_check_class" id="countries_id" name="countries_id">
                                        <option value="">Select</option>
                                        <option value="india">India</option>

                                    </select>
                                    <div class="show_error_mandatory" id="country_error"></div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="state" class="form-label">State <span
                                            class="text-danger">*</span></label>
                                    <select class="form-select empty_check_class" id="state" name="state">

                                    </select>
                                    <div class="show_error_mandatory" id="state_error"></div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="cties_id" class="form-label">City <span
                                            class="text-danger">*</span></label>
                                    <select class="form-select empty_check_class" id="cties_id" name="city">

                                    </select>
                                    <div class="show_error_mandatory" id="city_error"></div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="pincode" class="form-label">Pincode <span
                                            class="text-danger">*</span></label>
                                    <input type="text" class="form-control empty_check_class" placeholder="Pincode"
                                        name="pincode" id="pincode" maxlength="6">
                                    <div class="show_error_mandatory" id="pincode_error"></div>
                                </div>
                                <div class="col-md-12 mb-3">
                                    <label for="mobile_no" class="form-label">Mobile Number <span
                                            class="text-danger">*</span></label>
                                    <div class="d-flex">
                                        <select class="form-select w-25 empty_check_class" id="isd_code"
                                            name="isd_code">
                                            <option>select</option>
                                            <option value="+91">+91</option>
                                            <option value="+92">+92</option>
                                            <option value="+93">+93</option>
                                        </select>
                                        <input type="text" class="form-control empty_check_class"
                                            placeholder="Mobile Number" name="mobile_no" id="mobile_no">
                                        <div class="show_error_mandatory" id="mobile_error"></div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="fax_no" class="form-label">Fax</label>
                                    <input type="text" class="form-control" placeholder="Fax" name="fax_no" id="fax_no">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="phone_no" class="form-label">Phone</label>
                                    <input type="text" class="form-control" placeholder="Phone" name="phone_no"
                                        id="phone_no">
                                </div>
                                <div class="col-md-12 mb-3">
                                    <label for="new_password" class="form-label">Password</label>
                                    <input type="password" class="form-control" placeholder="Password"
                                        name="new_password" id="new_password">
                                    <div class="show_error_mandatory" id="psw_error"></div>
                                </div>
                                <div class="col-md-12 mb-3">
                                    <label for="confirm_password" class="form-label">Confirm Password</label>
                                    <input type="password" class="form-control" placeholder="Confirm Password"
                                        name="confirm_password" id="confirm_password">
                                    <div class="show_error_mandatory" style="color: red;" id="confirm_psw_error"></div>
                                </div>
                                <div class="col-md-12">
                                    <button type="button" class="btn btn-info btn-block w-100 rounded-pill text-white"
                                        id="sign_up">SIGNUP</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>

        $(document).on('click', '#login_val', function () {
            emptyFlag1 = $('.item_required_h').val();
            if (emptyFlag1 == '') {
                alert('Please fill all mandatory fields');
            }
            else {
                $.ajax({
                    url: "/login/",
                    method: "POST",
                    data: $('#login_user').serialize(),
                    success: function (data) {
                        var url = '/list_incident/'
                        if (data.id > 0) {
                            success_msg(data.msg, url)
                        } else {
                            alert(data.msg)
                        }

                    },

                });
            }
        });


        function success_msg(msg, url) {
            $.alert({
                icon: 'fa fa-success',
                title: 'Success!',
                content: msg,
                buttons: {
                    OK: {
                        text: 'OK',
                        btnClass: 'btn-green',
                        keys: ['enter'],
                        action: function () {
                            window.location.href = url;
                        }
                    }
                }
            });
        }


        $(document).on('input', '.empty_check_class', function () {
            $(this).css('border', '');
            $('.show_error_mandatory').hide();
        });

        $(document).on('click', '#sign_up', function () {

            emptyFlag1 = $('.empty_check_class').val();

            if (emptyFlag1 == '') {
                $('.show_error_mandatory').html('Please fill all mandatory fields').css('color', 'red');
                $('.empty_check_class').css('border', '2px solid red');
            }
            else {
                $.ajax({
                    url: "/create_user/",
                    method: "POST",
                    data: $('#signup_user').serialize(),
                    success: function (data) {
                        if (data.id > 0) {
                            alert(data.msg)
                            $('#signup_user').find('input[type="text"], input[type="email"], input[type="password"], textarea').val('');
                        } else {
                            alert(data.msg)
                        }
                    },
                });
            }
        });

        $(document).on('change', '#countries_id', function () {
            var country_id = $(this).find('option:selected').attr('data-county-id');
            if (country_id) {
                $.ajax({
                    url: '/state_val/',
                    data: { country_id: country_id },
                    datatype: "text",
                    success: function (data) {
                        $("#state").html("");

                        var html = '';
                        html += '<option value="">Select</option>';

                        $.each(data.doc_list, function (index, item) {

                            html += '<option value="' + item.id + '" data-stt-id="' + item.id + '">' + item.name + '</option>';

                        });

                        $('#state').append(html);
                    },
                });
            }
            else {
                $("#state").html("");
                var html = '';
                html += '<option value="">None</option>';
                $('#state').append(html);
            }
        });

        $(document).on('change', '#state', function () {
            var states_id = $(this).find('option:selected').attr('data-stt-id');

            if (states_id) {
                $.ajax({
                    url: '/cities_val/',
                    data: { states_id: states_id },
                    datatype: "text",
                    success: function (data) {
                        $("#cties_id").html("");

                        var html = '';
                        html += '<option value="">Select</option>';

                        $.each(data.doc_list, function (index, item) {

                            html += '<option value="' + item.id + '">' + item.name + '</option>';

                        });

                        $('#cties_id').append(html);
                    },
                });
            }
            else {
                $("#cties_id").html("");
                var html = '';
                html += '<option value="">None</option>';
                $('#cties_id').append(html);
            }
        });




        function match_conf_psw() {
            var psw = $("#new_password").val();
            var conf_psw = $("#confirm_password").val();

            if (psw != conf_psw) {
                $("#confirm_psw_error").text(" Password is not a valid");
                conf_psw.focus;
                alert(conf_psw)
            } else {
                $("#confirm_psw_error").text("");
                $('#confirm_psw_error').removeAttr('style');
            }
        }

        function checkemail() {
            var email = $("#user_email").val();
            var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            if (!filter.test(email)) {
                if (email == '') {
                    $("#email_error").text('');
                    $('#user_email').css('border-color', 'red');

                } else {
                    $("#email_error").text(email + " is not a valid email");
                    email.focus;
                }
            } else {
                $("#email_error").text("");
                $('#user_email').removeAttr('style');
            }
        }

        function checkemail1() {
            var email = $("#user_email").val();
            var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            if (!filter.test(email)) {
                if (email == '') {
                    $("#email_error").text('');
                    $('#user_email').css('border-color', 'red');
                } else {
                    $("#user_email").val('');
                    $('#user_email').css('border-color', 'red');
                    $("#email_error").text('');
                    email.focus;
                }
            } else {
                $("#email_error").text("");
                $('#user_email').removeAttr('style');
            }
        }


    </script>

</body>

</html>